{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/building-ranking-algorithm","result":{"data":{"markdownRemark":{"id":"dfecd603-0a9f-56d0-b2c9-e1df6e182840","html":"<p><img src=\"/media/DN-Blog-Ranking-Algorithm.jpg\" alt=\"BUILDING THE RANKING ALGORITHM\"></p>\n<p>How to rank the product feed for user?<br>\nThis is multi-millioner question. Everyone would love to rank the product like Facebook ranks news/update but this is not viable for majority of business. Generally websites rank base on newest or popular product, but this method has more cons than pros. Ranking is omnipresent from newsletter to ads and as data scientist I have always struggle to develop the ranking algorithm due all issue like feedback effect(cycle of top product getting top spot and more order), long tail(80/20 rule) and multiple factor to consider. After reading tons of article, research paper and carry out multiple A/B testing , here is my final strategy:  </p>\n<p>We want product feed to have combination of 3 variety of  product, latest, popular and trending. I calculated all three score separately for each product, normalize them and than combine them using one of strategy stated below.  </p>\n<h3 id=\"get-the-score\" style=\"position:relative;\"><a href=\"#get-the-score\" aria-label=\"get the score permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Get the score:</h3>\n<p><strong>1. Latest_score:</strong> Do we take liner scale for age of product or log scale or gravity like <a href=\"https://medium.com/hacking-and-gonzo/how-hacker-news-ranking-algorithm-works-1d9b0cf2c08d\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">hacker news</a>, it all depends on your product. E.g for Reddit today news is most important, any news older than than a day is not relevant until and unless it very popular, for his case log scale or scale with high gravity is useful. But for job portal, job that are week old may be still relevant and liner scale with low gravity may be useful.  </p>\n<p><strong>2. Popularity_score:</strong> You want to show popular product at top but still not let top 1% of product which account for large volume of sales or traffic to dominant. You can used similar strategy with lastest_score, take log based of any based or used gravity to minimize the effect.  </p>\n<p><strong>3. Trending_score:</strong> Best way to find trending product is to find conversion ratio of any product ( conversion ratio may be purchase or click, its no_of_desired_action/ total_visit). You could use CVR but CVR are sensitive as few product with low page view may have high CVR. So I calculated <a href=\"https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Wilson score</a> for CVR, <a href=\"https://medium.com/hacking-and-gonzo/how-reddit-ranking-algorithms-work-ef111e33d0d9\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Reddit uses it</a>(Wilson score is mostly used when you have positive feedback and negative feedback. For CVR, we consider positive feedback and those visit that lead to desired action or negative feedback as those visit that didn’t lead to desired action) . Its simple but elegant. Best things about Wilson Score is it auto adjusts, i.e if you have product with low page view but high CVR than it will be ranked at top but if it cant maintain the CVR , Wilson score decrease. I also like using <a href=\"https://en.wikipedia.org/wiki/Beta_distribution\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">beta distrubation</a> probability value to make CVR more robust in-place of Wilson Score.  </p>\n<h3 id=\"how-to-combine-these-scores\" style=\"position:relative;\"><a href=\"#how-to-combine-these-scores\" aria-label=\"how to combine these scores permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to combine these scores?</h3>\n<p><strong>First Strategy:</strong> Normalized all score and give certain weight to each score. E.g <em>0.33*latest + 0.33*popular+0.33*trending +0.01*random</em> or <em>popular/latest + trending.</em><br>\n<strong>Second Strategy:</strong>  Predefine no of slots for each strategy and repeat i,e put 2 popular item followed by 2 trending followed by 2 latest.  </p>\n<h3 id=\"how-to-findbest-weight-or-best-slots-number-for-each-strategy\" style=\"position:relative;\"><a href=\"#how-to-findbest-weight-or-best-slots-number-for-each-strategy\" aria-label=\"how to findbest weight or best slots number for each strategy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to findbest weight or best slots number for each strategy?</h3>\n<p>Domain expertise along with  numerous A/B test or <a href=\"https://medium.com/netflix-techblog/interleaving-in-online-experiments-at-netflix-a04ee392ec55\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">interleaving</a> is value resources to find best weight or slot numbers. It will take time to get the best weight, don’t lose patience.  </p>\n<blockquote>\n<p>Note: I have left personalize  recommendation here, I will write more blog on how to added personal recommendation(Content and collaborative filtering) score in future blog post.</p>\n</blockquote>\n<p>Quote from book I am reading:  </p>\n<blockquote>\n<p><em>“Introverts, in contrast, may have strong social skills and enjoy parties and business meetings, but after a while wish they were home in their pajamas. They prefer to devote their social energies to close friends, colleagues, and family. They listen more than they talk, think before they speak, and often feel as if they express themselves better in writing than in conversation. They tend to dislike conflict. Many have a horror of small talk, but enjoy deep discussions.”</em> </p>\n<p><strong>― Susan Cain, Quiet: The Power of Introverts in a World That Can’t Stop Talking</strong></p>\n</blockquote>","fields":{"slug":"/posts/building-ranking-algorithm","tagSlugs":["/tag/thinking/","/tag/algorithm/"]},"frontmatter":{"date":"2020-06-04T22:12:03.284Z","description":"Combine mutiple algorithum to rank products. Generally websites rank base on newest or popular product, but this method has more cons than pros. Ranking is omnipresent from newsletter to ads.","tags":["thinking","algorithm"],"title":"Building Ranking Algorithm","socialImage":"/media/DN-Blog-Ranking-Algorithm.jpg"}}},"pageContext":{"slug":"/posts/building-ranking-algorithm"}}}